<div class="dashboard-container">

  <div class="dashboard-user-info">
    <img src="https://kitt.lewagon.com/placeholder/users/arthur-littm" alt="User Avatar" class="user-avatar">
    <div>
      <h2>Name</h2>
      <h2>Surname</h2>
      <p><strong>Email:</strong> name.surname@gmail.com</p>
      <p><strong>Phone:</strong>+123456789</p>
    </div>
    <button class="button-green">
      <a href="<%= new_island_path %>">Upload My Island</a>
    </button>
  </div>

  <%# DASHBOARD %>
  <div class="dashboard-cards">

    <div class="dashboard-card">
      <h2>My Islands</h2>

      <%# CAROUSEL - MY ISLANDS %>
      <div class="carousel-container">
        <div class="carousel-view">
          <button id="prev-btn" class="prev-btn">&#9664;</button>
          <div id="item-list" class="item-list">
            <% @islands.each do |island| %>
              <div class="card-item-island">
                <a href="<%= island_path(island) %>" class="card-link">
                  <img src="https://images.pexels.com/photos/6762488/pexels-photo-6762488.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Exotic Island" id="carousel-img">
                  <h3><%= island.name %></h3>
                  <p><i class="fa-solid fa-location-dot"></i> <%= island.location %></p>
                </a>
              </div>
            <% end %>
          </div>
          <button id="next-btn" class="next-btn">&#9654;</button>
        </div>
      </div>
    </div>

    <div class="dashboard-card">
      <h2>My Bookings</h2>

      <%# CAROUSEL - MY BOOKINGS %>
      <div class="carousel-container">
        <div class="carousel-view">
          <button id="prev-btn" class="prev-btn">&#9664;</button>
          <div id="item-list" class="item-list">
            <% unless @user_bookings.empty? %>
              <% @user_bookings.each do |booking| %>
                <div class="card-item">
                  <h3>Booking ID: <%= booking.id %></h3>
                  <p><span class = bold>Island ID:</span> <%= booking.island_id %></p>
                  <p><span class = bold>Number of Guests:</span> <%= booking.number_of_guests %></p>
                  <p><span class = bold>Your island getaway at:</span> <%= booking.island.name %>, <%= booking.island.location %> (<%= booking.number_of_guests %> guests)</p>
                  <p><span class = bold>Booking dates:</span> <%= booking.start_date%>-<%= booking.end_date %> (<%= (booking.end_date - booking.start_date).to_i %> days)</p>
                  <p><span class = bold>Booking status:</span> <%= booking.status == "true" ? "Confirmed" : "Pending" %></p>
                  <p><span class = bold>Total Price:</span> $<%= (booking.end_date - booking.start_date).to_i * booking.island.price %> ($<%= booking.island.price %>/day)</p>
                  <%= link_to "Delete", booking_path(booking), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}, class: 'delete-btn' %>
                </div>
              <% end %>
            <% else %>
              <p>No bookings yet.</p>
            <% end %>
          </div>
          <button id="next-btn" class="next-btn">&#9654;</button>
        </div>
      </div>
    </div>

    <%#  CAROUSEL - BOOKINGS FOR MY ISLAND %>

    <div class="dashboard-card">
      <h2>Bookings for My Islands</h2>
      <%# CAROUSEL %>
      <div class="carousel-container">
        <div class="carousel-view">
          <button id="prev-btn" class="prev-btn">&#9664;</button>
          <div id="item-list" class="item-list">
            <% unless @bookings.empty? %>
              <% @bookings.each do |booking| %>
                <div class="card-item">
                  <h3>Booking ID: <%= booking.id %></h3>
                  <p><span class = bold>Island ID:</span> <%= booking.island_id %></p>
                  <p><span class = bold>Booking Status:</span> <%= booking.status %></p>
                  <p><span class = bold>Number of Guests:</span> <%= booking.number_of_guests %></p>
                  <div class="booking-actions">
                    <%= link_to "Accept", booking_path(booking, status: true), data: { turbo_method: :patch }, class: "accept-link" %>
                    <%= link_to "Decline", booking_path(booking, status: false), data: { turbo_method: :patch }, class: "decline-link" %>
                  </div>
                </div>
              <% end %>
            <% else %>
              <p>No bookings yet.</p>
            <% end %>
          </div>
          <button id="next-btn" class="next-btn">&#9654;</button>
        </div>
      </div>
    </div>
  </div>
</div>
